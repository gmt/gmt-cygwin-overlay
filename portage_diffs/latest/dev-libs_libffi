===== mutual sub-directory: "dev-libs/libffi" =====
----[ "dev-libs/libffi/libffi-3.0.10.ebuild" ]----->8----->
--- PORTAGE/dev-libs/libffi/libffi-3.0.10.ebuild
+++ OVERLAY/dev-libs/libffi/libffi-3.0.10.ebuild
@@ -6,7 +6,7 @@
 
 MY_P=${P/_}
 
-inherit libtool toolchain-funcs eutils
+inherit libtool toolchain-funcs eutils autotools
 
 DESCRIPTION="a portable, high level programming interface to various calling conventions."
 HOMEPAGE="http://sourceware.org/libffi/"
@@ -32,8 +32,18 @@
 	fi
 }
 
+# work around bug(?) in eautoreconf which causes i.e.:
+# eval x="$(ACLOCAL_AMFLAGS) y"
+ACLOCAL_AMFLAGS() {
+	return 0
+}
+
 src_prepare() {
 	epatch "${FILESDIR}"/${PN}-3.0.9-x32.patch
+	if [[ ${CHOST} == *-cygwin* ]] ; then
+		epatch "${FILESDIR}"/${PN}-3.0.8-cygport-no-undefined.patch
+		eautoreconf
+	fi
 	epatch_user
 	elibtoolize
 }
<-----8<-----
===== mutual sub-directory: "dev-libs/libffi/files" =====

*** The following files appear only in the overlay ***
overlay/dev-libs/libffi/files/libffi-3.0.8-cygport-no-undefined.patch: unified diff output, ASCII text

*** The following files appear only in portage ***
usr/portage/dev-libs/libffi/libffi-3.0.11.ebuild: ASCII English text

