Desc:   Stop libgcc build from using ${T} which collides with portage's ${T}.
Author: Heiko Przybyl <zuxez@cs.tu-berlin.de>/Updated for 4.4.4 Eric Meddaugh

Addition: Also apply the same fix for Sparc targets
Author: Maurice van der Pot <griffon26@kfk4ever.com>

--- gcc-4.4.4/libgcc/Makefile.in
+++ gcc-4.4.4/libgcc/Makefile.in
@@ -888,12 +888,12 @@
 	# We must use cd && make rather than make -C, or else the stage
 	# number will be embedded in debug information.
 
-	T=`$(PWD_COMMAND)`/ \
+	_T_=`$(PWD_COMMAND)`/ \
 	&& cd $(gcc_objdir) \
 	&& $(MAKE) GCC_FOR_TARGET="$(CC)" \
 	  MULTILIB_CFLAGS="$(CFLAGS)" \
-	  T=$$T \
-	  T_TARGET="$(patsubst %,$${T}%,$(GCC_EXTRA_PARTS))" \
+	  _T_=$$_T_ \
+	  T_TARGET="$(patsubst %,$${_T_}%,$(GCC_EXTRA_PARTS))" \
 	  T_TARGET
 
 	# Early copyback; see "all" above for the rationale.  The
--- gcc-4.4.4/libgcc/config/i386/t-sol2
+++ gcc-4.4.4/libgcc/config/i386/t-sol2
@@ -1,24 +1,24 @@
 # gmon build rule:
-$(T)gmon.o:	$(gcc_srcdir)/config/i386/gmon-sol2.c $(GCC_PASSES) $(CONFIG_H)
+$(_T_)gmon.o:	$(gcc_srcdir)/config/i386/gmon-sol2.c $(GCC_PASSES) $(CONFIG_H)
 	$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(CFLAGS) \
-		-c $(gcc_srcdir)/config/i386/gmon-sol2.c -o $(T)gmon.o
+		-c $(gcc_srcdir)/config/i386/gmon-sol2.c -o $(_T_)gmon.o
 
 # Assemble startup files.
 # Apparently Sun believes that assembler files don't need comments, because no
 # single ASCII character is valid (tried them all).  So we manually strip out
 # the comments with sed.  This bug may only be in the Early Access releases.
-$(T)gcrt1.o: $(gcc_srcdir)/config/i386/sol2-gc1.asm $(GCC_PASSES)
+$(_T_)gcrt1.o: $(gcc_srcdir)/config/i386/sol2-gc1.asm $(GCC_PASSES)
 	sed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-gc1.asm >gcrt1.s
-	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)gcrt1.o gcrt1.s
-$(T)crt1.o: $(gcc_srcdir)/config/i386/sol2-c1.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(_T_)gcrt1.o gcrt1.s
+$(_T_)crt1.o: $(gcc_srcdir)/config/i386/sol2-c1.asm $(GCC_PASSES)
 	sed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-c1.asm >crt1.s
-	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)crt1.o crt1.s
-$(T)crti.o: $(gcc_srcdir)/config/i386/sol2-ci.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(_T_)crt1.o crt1.s
+$(_T_)crti.o: $(gcc_srcdir)/config/i386/sol2-ci.asm $(GCC_PASSES)
 	sed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-ci.asm >crti.s
-	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)crti.o crti.s
-$(T)crtn.o: $(gcc_srcdir)/config/i386/sol2-cn.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(_T_)crti.o crti.s
+$(_T_)crtn.o: $(gcc_srcdir)/config/i386/sol2-cn.asm $(GCC_PASSES)
 	sed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-cn.asm >crtn.s
-	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)crtn.o crtn.s
+	$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(_T_)crtn.o crtn.s
 
 # We need to use -fPIC when we are using gcc to compile the routines in
 # crtstuff.c.  This is only really needed when we are going to use gcc/g++
--- gcc-4.4.4/gcc/config/sparc/t-sol2
+++ gcc-4.4.4/gcc/config/sparc/t-sol2
@@ -1,18 +1,18 @@
 # gmon build rule:
-$(T)gmon.o:	$(srcdir)/config/sparc/gmon-sol2.c $(GCC_PASSES) \
+$(_T_)gmon.o:	$(srcdir)/config/sparc/gmon-sol2.c $(GCC_PASSES) \
   $(TCONFIG_H) tsystem.h coretypes.h $(TM_H) stmp-int-hdrs
 	$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) \
-		-c $(srcdir)/config/sparc/gmon-sol2.c -o $(T)gmon.o
+		-c $(srcdir)/config/sparc/gmon-sol2.c -o $(_T_)gmon.o
 
 # Assemble startup files.
-$(T)crt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)
-	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm
-$(T)crti.o: $(srcdir)/config/sparc/sol2-ci.asm $(GCC_PASSES)
-	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crti.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-ci.asm
-$(T)crtn.o: $(srcdir)/config/sparc/sol2-cn.asm $(GCC_PASSES)
-	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crtn.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-cn.asm
-$(T)gcrt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)
-	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -DGCRT1 -o $(T)gcrt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm
+$(_T_)crt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(_T_)crt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm
+$(_T_)crti.o: $(srcdir)/config/sparc/sol2-ci.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(_T_)crti.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-ci.asm
+$(_T_)crtn.o: $(srcdir)/config/sparc/sol2-cn.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(_T_)crtn.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-cn.asm
+$(_T_)gcrt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)
+	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -DGCRT1 -o $(_T_)gcrt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm
 
 # We need to use -fPIC when we are using gcc to compile the routines in
 # crtstuff.c.  This is only really needed when we are going to use gcc/g++
