Binary files gcc-4.5.3.orig/libjava/.HACKING.swp and gcc-4.5.3/libjava/.HACKING.swp differ
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/ChangeLog gcc-4.5.3/libjava/ChangeLog
--- gcc-4.5.3.orig/libjava/ChangeLog	2011-04-28 07:10:19.000000000 -0700
+++ gcc-4.5.3/libjava/ChangeLog	2012-02-22 22:15:15.203485600 -0800
@@ -1,3 +1,15 @@
+2011-02-04  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>
+
+	PR java/21206
+	* configure.ac (LDLIBICONV): New substituted variable, with
+	instances of '-Wl,' removed from LIBICONV.
+	* configure: Regenerate.
+	* libgcj.spec.in: Use @LDLIBICONV@ not @LIBICONV@.
+	* Makefile.in: Regenerate.
+	* gcj/Makefile.in: Likewise.
+	* include/Makefile.in: Likewise.
+	* testsuite/Makefile.in: Likewise.
+
 2011-04-28  Release Manager
 
 	* GCC 4.5.3 released.
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/configure gcc-4.5.3/libjava/configure
--- gcc-4.5.3.orig/libjava/configure	2012-02-22 19:24:22.397985600 -0800
+++ gcc-4.5.3/libjava/configure	2012-02-22 22:22:06.226485600 -0800
@@ -670,6 +670,7 @@
 GTK_LIBS
 GTK_CFLAGS
 PKG_CONFIG
+LDLIBICONV
 LTLIBICONV
 LIBICONV
 USING_GCC_FALSE
@@ -918,6 +919,7 @@
 with_antlr_jar
 enable_gjdoc
 enable_java_maintainer_mode
+enable_libjava_multilib
 enable_dependency_tracking
 enable_maintainer_mode
 enable_libgcj_sublibs
@@ -13351,7 +13353,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 13342 "configure"
+#line 13356 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -13457,7 +13459,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 13448 "configure"
+#line 13462 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -19436,7 +19438,7 @@
   enableval=$enable_sjlj_exceptions; :
 else
   cat > conftest.$ac_ext << EOF
-#line 19427 "configure"
+#line 19441 "configure"
 struct S { ~S(); };
 void bar();
 void foo()
@@ -21943,6 +21945,8 @@
   fi
 fi
 
+   LDLIBICONV=`echo " $LIBICONV " | sed "s/${acl_cv_wl--Wl,}/ /g; s/,/ /g"`
+
 
    for ac_func in gethostbyname_r
 do :
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/configure.ac gcc-4.5.3/libjava/configure.ac
--- gcc-4.5.3.orig/libjava/configure.ac	2012-02-22 19:24:22.363485600 -0800
+++ gcc-4.5.3/libjava/configure.ac	2012-02-22 22:14:00.007485600 -0800
@@ -1219,6 +1219,8 @@
    AM_ICONV
    AM_LC_MESSAGES
    AC_STRUCT_TIMEZONE
+   LDLIBICONV=`echo " $LIBICONV " | sed "s/${acl_cv_wl--Wl,}/ /g; s/,/ /g"`
+   AC_SUBST([LDLIBICONV])
 
    AC_CHECK_FUNCS(gethostbyname_r, [
      AC_DEFINE(HAVE_GETHOSTBYNAME_R, 1,
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/gcj/Makefile.in gcc-4.5.3/libjava/gcj/Makefile.in
--- gcc-4.5.3.orig/libjava/gcj/Makefile.in	2010-04-02 11:18:06.000000000 -0700
+++ gcc-4.5.3/libjava/gcj/Makefile.in	2012-02-22 22:14:00.012485600 -0800
@@ -176,6 +176,7 @@
 JVM_ROOT_DIR = @JVM_ROOT_DIR@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
+LDLIBICONV = @LDLIBICONV@
 LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@
 LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@
 LIBART_CFLAGS = @LIBART_CFLAGS@
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/include/Makefile.in gcc-4.5.3/libjava/include/Makefile.in
--- gcc-4.5.3.orig/libjava/include/Makefile.in	2010-04-02 11:18:06.000000000 -0700
+++ gcc-4.5.3/libjava/include/Makefile.in	2012-02-22 22:14:00.016985600 -0800
@@ -176,6 +176,7 @@
 JVM_ROOT_DIR = @JVM_ROOT_DIR@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
+LDLIBICONV = @LDLIBICONV@
 LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@
 LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@
 LIBART_CFLAGS = @LIBART_CFLAGS@
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/libgcj.spec.in gcc-4.5.3/libjava/libgcj.spec.in
--- gcc-4.5.3.orig/libjava/libgcj.spec.in	2012-02-22 19:24:21.939485600 -0800
+++ gcc-4.5.3/libjava/libgcj.spec.in	2012-02-22 22:18:46.843985600 -0800
@@ -7,6 +7,6 @@
 *startfile: @THREADSTARTFILESPEC@ %(startfileorig)
 
 %rename lib liborig
-*lib: @LD_START_STATIC_SPEC@ @LIBGCJ_SPEC@ @LD_FINISH_STATIC_SPEC@ -lm @LIBICONV@ @GCSPEC@ @THREADSPEC@ @ZLIBSPEC@ @SYSTEMSPEC@ %(libgcc) @LIBSTDCXXSPEC@ %(liborig)
+*lib: @LD_START_STATIC_SPEC@ @LIBGCJ_SPEC@ @LD_FINISH_STATIC_SPEC@ -lm @LDLIBICONV@ @GCSPEC@ @THREADSPEC@ @ZLIBSPEC@ @SYSTEMSPEC@ %(libgcc) @LIBSTDCXXSPEC@ %(liborig)
 
 *jc1: @HASH_SYNC_SPEC@ @DIVIDESPEC@ @CHECKREFSPEC@ @JC1GCSPEC@ @EXCEPTIONSPEC@ @BACKTRACESPEC@ @IEEESPEC@ @ATOMICSPEC@ @LIBGCJ_BC_SPEC@ -fkeep-inline-functions
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/Makefile.in gcc-4.5.3/libjava/Makefile.in
--- gcc-4.5.3.orig/libjava/Makefile.in	2012-02-22 19:24:18.537985600 -0800
+++ gcc-4.5.3/libjava/Makefile.in	2012-02-22 22:13:59.923485600 -0800
@@ -712,6 +712,7 @@
 JVM_ROOT_DIR = @JVM_ROOT_DIR@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
+LDLIBICONV = @LDLIBICONV@
 LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@
 LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@
 LIBART_CFLAGS = @LIBART_CFLAGS@
diff -urN '--exclude=.iconv.m4.swp' gcc-4.5.3.orig/libjava/testsuite/Makefile.in gcc-4.5.3/libjava/testsuite/Makefile.in
--- gcc-4.5.3.orig/libjava/testsuite/Makefile.in	2010-10-06 11:54:14.000000000 -0700
+++ gcc-4.5.3/libjava/testsuite/Makefile.in	2012-02-22 22:14:00.026985600 -0800
@@ -151,6 +151,7 @@
 JVM_ROOT_DIR = @JVM_ROOT_DIR@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
+LDLIBICONV = @LDLIBICONV@
 LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@
 LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@
 LIBART_CFLAGS = @LIBART_CFLAGS@
